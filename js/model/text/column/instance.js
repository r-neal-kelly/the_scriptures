import*as Utils from"../../../utils.js";import*as Row from"../row.js";import{Type}from"./type.js";export class Instance{constructor({type:s,index:e}){this.type=s,this.index=e,this.rows=[],this.last_command=null}Update_Empty(){0,0,this.Push_Row("")}Update_Point(s,e,t){0,this.rows.length<1&&this.Push_Row(s),this.Working_Row().Update_Point(e,t)}Update_Letter(s,e){0,this.rows.length<1&&this.Push_Row(s),this.Working_Row().Update_Letter(e)}Update_Marker(s,e){0,this.rows.length<1&&this.Push_Row(s),this.Working_Row().Update_Marker(e)}Update_Word(s,e){0,this.rows.length<1&&this.Push_Row(s),this.Working_Row().Update_Word(e)}Update_Break(s,e){0,this.rows.length<1&&this.Push_Row(s),this.Working_Row().Update_Break(e)}Update_Command(s,e,t){0,(this.rows.length<1||t.Is_Row()&&(!this.last_command||!this.last_command.Is_Column()&&!this.last_command.Is_Margin()&&!this.last_command.Is_Interlinear()))&&this.Push_Row(s),this.Working_Row().Update_Command(e,t),this.last_command=t}Push_Row(s){this.rows.push(new Row.Instance({index:this.rows.length,value:s}))}Working_Row(){return this.rows[this.rows.length-1]}Is_Finalized(){return Object.isFrozen(this.rows)}Finalize(){0,Object.freeze(this.rows);for(const s of this.rows)s.Finalize();this.last_command=null}Type(){return 0,this.type}Is_Tabular(){return 0,this.type===Type.TABULAR}Is_Marginal(){return 0,this.type===Type.MARGINAL}Is_Interlinear(){return 0,this.type===Type.INTERLINEAR}Index(){return 0,this.index}Has_Row_Index(s){return 0,0,s<this.Row_Count()}Row_Count(){return 0,this.rows.length}Row(s){return 0,0,this.rows[s]}}