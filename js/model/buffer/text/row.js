import*as Utils from"../../../utils.js";import*as Entity from"../../entity.js";import*as Language from"../../language.js";import*as Text from"../../text.js";import*as Segment from"./segment.js";export class Instance extends Entity.Instance{constructor({buffer:t,column:e,index:n,text:s}){if(super(),this.buffer=t,this.column=e,this.index=n,this.text=s,this.segments=[],null==s)0,0;else if(0,0,""===s.Value()){const t=new Text.Segment.Instance({segment_type:Text.Segment.Type.MACRO,index:0});t.Add_Item(new Text.Part.Instance({part_type:Text.Part.Type.POINT,index:0,value:"Â ",status:Text.Part.Status.GOOD,style:Text.Part.Style._NONE_,language:null})),this.segments.push(new Segment.Instance({buffer:this.buffer,row:this,index:0,text:t}))}else for(let t=0,e=s.Macro_Segment_Count();t<e;t+=1)this.segments.push(new Segment.Instance({buffer:this.buffer,row:this,index:t,text:s.Macro_Segment(t)}));this.Add_Dependencies(this.segments)}Buffer(){return this.buffer}Column(){return 0,this.column}Index(){return 0,this.index}Has_Text(){return null!=this.text}Text(){return 0,this.text}Value(){return this.Text().Value()}Min_Segment_Count(){return this.Buffer().Min_Segment_Count()}Segment_Count(){return this.segments.length}Segment_At(t){return 0,t<this.Segment_Count()?this.segments[t]:this.Buffer().Blank_Segment()}Is_Blank(){return null==this.text}Is_New_Line(){return""===this.Text().Value()}Is_Centered(){return this.Text().Can_Be_Centered()&&this.Text().Is_Centered()}Is_Padded(){return this.Text().Can_Be_Padded()&&this.Text().Is_Padded()}Padding_Count(){return this.Text().Can_Be_Padded()?this.Text().Padding_Count():0}Padding_Direction(){return this.Buffer().Default_Language_Direction()}Has_Styles(){return this.Has_Text()}Styles(){if(this.Has_Styles()){if(this.Is_Padded()){const t=`${this.Buffer().Pad_EM(this.Padding_Count())}em`,e=this.Padding_Direction()===Language.Direction.LEFT_TO_RIGHT?"left":"right";return`\n                    margin-${e}: ${t};\n                    border-${e}-width: 1px;\n                `}return""}return""}}