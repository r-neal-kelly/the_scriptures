import*as Utils from"../../../utils.js";import*as Language from"../../language.js";import*as Languages from"../../languages.js";import*as Entity from"../../entity.js";export class Instance extends Entity.Instance{constructor({segment:e,index:t,text:s}){super(),this.segment=e,this.index=t,this.text=s,null==s?(Utils.Assert(null==e,"segment must be null."),Utils.Assert(null==t,"index must be null."),this.value=""):(Utils.Assert(null!=e,"segment must not be null."),Utils.Assert(null!=t&&t>-1,"index must not be null, and must be greater than -1."),s.Has_Image_Value()?this.value=s.Image_Value():s.Has_Meta_Value()?this.value="":(this.value=s.Value().replace(/^ /," ").replace(/ $/," ").replace(/  /g,"  "),this.value=Languages.Singleton().Adapt_Text_To_Font({language_name:this.Language_Name(),font_name:this.Font_Name(),text:this.value}))),this.Add_Dependencies([])}Segment(){return Utils.Assert(null!=this.segment,"Doesn't have segment."),this.segment}Index(){return Utils.Assert(null!=this.index,"Doesn't have an index."),this.index}Text(){return Utils.Assert(null!=this.text,"Doesn't have text."),this.text}Value(){return this.value}Part(){Utils.Assert(!this.Is_Blank(),"Item is blank and doesn't have a part.");const e=this.Text();return e.Is_Part()?e:e.Break()}Is_Blank(){return null==this.text}Has_Image_Value(){return!this.Is_Blank()&&this.Text().Has_Image_Value()}Is_Indented(){Utils.Assert(!this.Is_Blank(),"Item is blank and can't be indented.");const e=this.Part();return e.Is_Command()&&e.Is_Indent()}Is_Error(){return this.Part().Is_Error()}Has_Italic_Style(){return this.Part().Has_Italic_Style()}Has_Bold_Style(){return this.Part().Has_Bold_Style()}Has_Underline_Style(){return this.Part().Has_Underline_Style()}Has_Small_Caps_Style(){return this.Part().Has_Small_Caps_Style()}Has_Error_Style(){return this.Part().Has_Error_Style()}Has_Argument_Style(){return this.Part().Has_Argument_Style()}Has_Override_Language_Name(){return null!=this.Part().Language()}Override_Language_Name(){return this.Part().Language()}Some_Override_Language_Name(){return Utils.Assert(this.Has_Override_Language_Name(),"doesn't have an override language"),this.Part().Language()}Language_Name(){const e=this.Override_Language_Name();return null!=e?e:this.Segment().Line().Buffer().Default_Language_Name()}Override_Font_Name(){const e=this.Override_Language_Name();return null!=e?this.Segment().Line().Buffer().Language_Font_Name(e):null}Font_Name(){const e=this.Override_Font_Name();return null!=e?e:this.Segment().Line().Buffer().Default_Font_Name()}Has_Override_Font_Styles(){return this.Has_Override_Language_Name()}Some_Override_Font_Styles(){return Utils.Assert(this.Has_Override_Font_Styles(),"doesn't have override font styles"),this.Segment().Line().Buffer().Override_Font_Styles(this.Some_Override_Language_Name())}Is_Greek(){return this.Language_Name()===Language.Name.GREEK}}