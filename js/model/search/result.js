import*as Utils from"../../utils.js";export class Instance{constructor(t){this.line=t,this.matches=[]}Copy(){const t=new Instance(this.line);for(const _ of this.matches)t.matches.push(_.Copy());return t}Combine(t){for(let _=0,n=t.Match_Count();_<n;_+=1)this.Try_Add_Match(t.Match(_));return t.matches=[],this}Line(){return this.line}Has_Match_Equal_To(t){for(const _ of this.matches)if(_.Is_Equal_To(t))return!0;return!1}Match_Count(){return this.matches.length}Match(t){return Utils.Assert(t>-1,"match_index must be greater than -1."),Utils.Assert(t<this.Match_Count(),"match_index must be less than match_count."),this.matches[t]}Try_Add_Match(t){this.Has_Match_Equal_To(t)||this.matches.push(t)}}export class Match{constructor({start_part_index:t,end_part_index:_,start_part_start_unit_index:n,end_part_end_unit_index:r}){this.start_part_index=t,this.end_part_index=_,this.start_part_start_unit_index=n,this.end_part_end_unit_index=r}Copy(){return new Match({start_part_index:this.start_part_index,end_part_index:this.end_part_index,start_part_start_unit_index:this.start_part_start_unit_index,end_part_end_unit_index:this.end_part_end_unit_index})}Start_Part_Index(){return this.start_part_index}End_Part_Index(){return this.end_part_index}Start_Part_Start_Unit_Index(){return this.start_part_start_unit_index}End_Part_End_Unit_Index(){return this.end_part_end_unit_index}Is_Equal_To(t){return t.start_part_index===this.start_part_index&&t.end_part_index===this.end_part_index&&t.start_part_start_unit_index===this.start_part_start_unit_index&&t.end_part_end_unit_index===this.end_part_end_unit_index}Includes(t){return t.start_part_index>=this.start_part_index&&t.end_part_index<=this.end_part_index&&t.start_part_start_unit_index>=this.start_part_start_unit_index&&t.end_part_end_unit_index<=this.end_part_end_unit_index}Shadows(t){return t.start_part_index>=this.start_part_index&&t.end_part_index<this.end_part_index||t.start_part_index>this.start_part_index&&t.end_part_index<=this.end_part_index||t.start_part_index===this.start_part_index&&t.end_part_index===this.end_part_index&&(t.start_part_start_unit_index>=this.start_part_start_unit_index&&t.end_part_end_unit_index<this.end_part_end_unit_index||t.start_part_start_unit_index>this.start_part_start_unit_index&&t.end_part_end_unit_index<=this.end_part_end_unit_index)}}