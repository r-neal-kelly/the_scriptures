var __awaiter=this&&this.__awaiter||function(t,s,i,e){return new(i||(i=Promise))((function(n,o){function a(t){try{w(e.next(t))}catch(t){o(t)}}function r(t){try{w(e.throw(t))}catch(t){o(t)}}function w(t){var s;t.done?n(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(a,r)}w((e=e.apply(t,s||[])).next())}))};import*as Utils from"../../utils.js";import*as Entity from"../entity.js";import*as Window from"./window.js";export class Instance extends Entity.Instance{constructor({layout:t}){super(),this.layout=t,this.windows=new Map,this.Add_Dependencies([])}Layout(){return this.layout}Count(){return this.windows.size}Has(t){return this.Has_ID(t.ID())}Has_ID(t){return this.windows.has(t)}From_ID(t){return 0,this.windows.get(t)}Has_At(t){return this.Layout().Bar().Tabs().Has_At(t)}At(t){return 0,this.Layout().Bar().Tabs().At(t).Window()}Iterator(){return this.windows.values()}Array(){return Array.from(this.Iterator())}Add(t){const s=t.ID();0,0,0,this.windows.set(s,t),this.Layout().Bar().Tabs().Add_Window(t)}Remove(t){0,0,0,this.Layout().Bar().Tabs().Remove_Window(this.From_ID(t)),this.windows.delete(t)}Add_Program(t){return __awaiter(this,void 0,void 0,(function*(){const s=new Window.Instance({wall:this,program:t});return!t.Should_Activate_Window()&&this.Layout().Has_Active_Window()||this.Layout().Set_Active_Window(s),yield s.Ready(),s.ID()}))}}