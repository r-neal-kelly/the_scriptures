var __awaiter=this&&this.__awaiter||function(t,i,s,e){return new(s||(s=Promise))((function(n,u){function o(t){try{r(e.next(t))}catch(t){u(t)}}function h(t){try{r(e.throw(t))}catch(t){u(t)}}function r(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,h)}r((e=e.apply(t,i||[])).next())}))};import*as Utils from"./utils.js";export class Instance{constructor(){this.slots=[],this.is_executing=!1,this.is_paused=!1}Count(){return this.slots.length}Enqueue(t){return __awaiter(this,void 0,void 0,(function*(){return new Promise(function(i){this.slots.push((function(){return __awaiter(this,void 0,void 0,(function*(){yield t(),i()}))})),this.Execute()}.bind(this))}))}Is_Executing(){return this.is_executing}Execute(){return __awaiter(this,void 0,void 0,(function*(){if(!1===this.is_executing&&!1===this.is_paused){for(this.is_executing=!0;this.slots.length>0&&!1===this.is_paused;){const t=this.slots[0];this.slots=this.slots.slice(1),yield t()}this.is_executing=!1}}))}Is_Paused(){return!1===this.is_executing&&!0===this.is_paused}Pause(){return __awaiter(this,void 0,void 0,(function*(){if(!1===this.is_paused)for(this.is_paused=!0;!0===this.is_executing&&!0===this.is_paused;)yield Utils.Wait_Milliseconds(1)}))}Unpause(){!0===this.is_paused&&(this.is_paused=!1,this.Execute())}Flush(){this.slots=[]}}