import*as Utils from"../../utils.js";import*as Reserved_Keys from"../reserved_keys.js";export class Instance{constructor(t){this.lookup=Object.create(null);for(const e of t){const t=e[0];0;let s=this.lookup;for(const e of t.slice(0,t.length-1))0,null!=s[e]?(0,s=s[e]):(s[e]=Object.create(null),s=s[e]);const n=t[t.length-1];0,0;const r=e[1],o=e[2];s[n]=[null,null],Utils.Is.String(r)?(s[n][0]=r,Utils.Is.String(o)?s[n][1]=o:Utils.Is.Array(o)?s[n][1]=new Instance(o):o&&(s[n][1]=s[n][0])):Utils.Is.Array(r)?(s[n][0]=new Instance(r),Utils.Is.String(o)?s[n][1]=o:Utils.Is.Array(o)?s[n][1]=new Instance(o):o&&(s[n][1]=s[n][0])):Utils.Is.String(o)?(s[n][1]=o,r&&(s[n][0]=s[n][1])):Utils.Is.Array(o)&&(s[n][1]=new Instance(o),r&&(s[n][0]=s[n][1])),Object.freeze(s[n]),0}}Maybe_Space(t,e,s){let n=this.lookup;for(let r=0,o=t.Count();r<o;r+=1){const l=t.At(r);if(Utils.Is.Array(n[l]))return r===o-1&&(e&&s?n[l][0]instanceof Instance&&n[l][0]:e||s?n[l][1]instanceof Instance&&n[l][1]:n[l][0]instanceof Instance&&n[l][0]);if(null==n[l])return!1;n=n[l]}return!0}Maybe_Output(t,e,s){let n=this.lookup;for(let r=0,o=t.Count();r<o;r+=1){const l=t.At(r);if(Utils.Is.Array(n[l]))return r===o-1&&(e&&s?!!Utils.Is.String(n[l][0])&&n[l][0]:e||s?!!Utils.Is.String(n[l][1])&&n[l][1]:!!Utils.Is.String(n[l][0])&&n[l][0]);if(null==n[l])return!1;n=n[l]}return!0}}