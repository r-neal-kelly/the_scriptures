import*as Utils from"../../utils.js";import*as Reserved_Keys from"../reserved_keys.js";export const MIRROR=!0;export const DEFAULT=!1;export const IGNORE_CAPS_LOCK=!0;export const RESPECT_CAPS_LOCK=!1;export class Instance{constructor(t){this.lookup=Object.create(null);for(const s of t){const t=s[0];0;let e=this.lookup;for(const s of t.slice(0,t.length-1))0,null!=e[s]?(0,e=e[s]):(e[s]=Object.create(null),e=e[s]);const n=t[t.length-1];0,0;const o=s[1],r=s[2],a=s.length>=4&&s[3];e[n]=[null,null,a],Utils.Is.String(o)?(e[n][0]=o,Utils.Is.String(r)?e[n][1]=r:Utils.Is.Array(r)?e[n][1]=new Instance(r):r&&(e[n][1]=e[n][0])):Utils.Is.Array(o)?(e[n][0]=new Instance(o),Utils.Is.String(r)?e[n][1]=r:Utils.Is.Array(r)?e[n][1]=new Instance(r):r&&(e[n][1]=e[n][0])):Utils.Is.String(r)?(e[n][1]=r,o&&(e[n][0]=e[n][1])):Utils.Is.Array(r)&&(e[n][1]=new Instance(r),o&&(e[n][0]=e[n][1])),Object.freeze(e[n]),0}}Maybe_Space(t,s,e){let n=this.lookup;for(let o=0,r=t.Count();o<r;o+=1){const a=t.At(o);if(Utils.Is.Array(n[a]))return o===r-1&&(n[a][2]?s?n[a][1]instanceof Instance&&n[a][1]:n[a][0]instanceof Instance&&n[a][0]:s&&e?n[a][0]instanceof Instance&&n[a][0]:s||e?n[a][1]instanceof Instance&&n[a][1]:n[a][0]instanceof Instance&&n[a][0]);if(null==n[a])return!1;n=n[a]}return!0}Maybe_Output(t,s,e){let n=this.lookup;for(let o=0,r=t.Count();o<r;o+=1){const a=t.At(o);if(Utils.Is.Array(n[a]))return o===r-1&&(n[a][2]?s?!!Utils.Is.String(n[a][1])&&n[a][1]:!!Utils.Is.String(n[a][0])&&n[a][0]:s&&e?!!Utils.Is.String(n[a][0])&&n[a][0]:s||e?!!Utils.Is.String(n[a][1])&&n[a][1]:!!Utils.Is.String(n[a][0])&&n[a][0]);if(null==n[a])return!1;n=n[a]}return!0}}