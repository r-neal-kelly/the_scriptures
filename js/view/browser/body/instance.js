var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};import*as Utils from"../../../utils.js";import*as Event from"../../../event.js";import*as Entity from"../../entity.js";import*as Selector from"./selector.js";import*as Reader from"./reader.js";export class Instance extends Entity.Instance{constructor({model:e,browser:t}){super({element:"div",parent:t,event_grid:t.Event_Grid()}),this.model=e}On_Life(){return[new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.AFTER,"Selector_Slot_Item_Select",this.Browser().ID()),event_handler:this.After_Selector_Slot_Item_Select,event_priority:0})]}On_Refresh(){this.Has_Selector()&&this.Has_Reader()||(this.Abort_All_Children(),new Selector.Instance({model:()=>this.Model().Selector(),body:this}),new Reader.Instance({model:()=>this.Model().Reader(),body:this}))}On_Reclass(){return["Body"]}After_Selector_Slot_Item_Select(){return __awaiter(this,void 0,void 0,(function*(){this.Refresh()}))}Model(){return this.model()}Browser(){return this.Parent()}Has_Selector(){return this.Has_Child(0)&&this.Child(0)instanceof Selector.Instance}Selector(){return Utils.Assert(this.Has_Selector(),"Does not have a selector."),this.Child(0)}Has_Reader(){return this.Has_Child(1)&&this.Child(1)instanceof Reader.Instance}Reader(){return Utils.Assert(this.Has_Reader(),"Does not have a reader."),this.Child(1)}}