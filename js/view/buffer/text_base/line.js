import*as Language from"../../../model/language.js";import*as Entity from"../../entity.js";export class Instance extends Entity.Instance{constructor({buffer:e,model:n,index:t}){super({element:"div",parent:e,event_grid:e.Event_Grid()}),this.model=n,this.index=t}On_Refresh(){const e=this.Model(),n=this.Child_Count();if(n>0&&e.Is_Blank())this.Skip_Children(),this.Element().classList.contains("Blank")&&this.Skip_Remaining_Siblings();else{for(let t=n,i=Math.max(e.Min_Column_Count({line_index:this.Index()}),e.Column_Count());t<i;t+=1)this.Add_Column(t)}}On_Reclass(){const e=this.Model(),n=[];return n.push("Line"),e.Is_Blank()?n.push("Blank"):e.Has_Margin()?n.push("Marginal_Line"):e.Has_Interlineation()?(n.push("Interlinear_Line"),e.Has_Forward_Interlineation()?n.push("Forward_Interlinear_Line"):n.push("Reverse_Interlinear_Line"),e.Is_Centered()?n.push("Centered_Interlinear_Line"):e.Is_Padded()&&n.push("Padded_Interlinear_Line")):e.Is_Row_Of_Table()&&(n.push("Tabular_Line"),e.Is_First_Row_Of_Table()&&n.push("First_Tabular_Line")),n}On_Restyle(){const e=this.Model();if(e.Is_Blank())return"";if(e.Has_Interlineation()){if(e.Is_Padded()){const n=`${this.Buffer().Pad_EM(e.Padding_Count())}em`,t=e.Padding_Direction()===Language.Direction.LEFT_TO_RIGHT?"left":"right";return`\n                        margin-${t}: ${n};\n                        border-${t}-width: 1px;\n                    `}return""}{const n=e.Text(),t=n.Column_Count();let i="",r="";if(e.Is_Row_Of_Table())i=e.Column_Percents().map((e=>`${e}fr`)).join(" "),r=10*t+"em";else{for(let e=0,r=t;e<r;e+=1){n.Column(e).Is_Marginal()?i+=" 0.5fr":i+=" 1fr"}r="100%"}return`\n                    grid-template-columns: ${i};\n    \n                    max-width: ${r};\n                `}}Model(){return this.model()}Index(){return this.index}Buffer(){return this.Parent()}Event_Grid_ID(){return this.Buffer().Event_Grid_ID()}}