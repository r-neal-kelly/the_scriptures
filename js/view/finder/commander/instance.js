var __awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{a(n.next(e))}catch(e){s(e)}}function l(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}a((n=n.apply(e,t||[])).next())}))};import*as Utils from"../../../utils.js";import*as Event from"../../../event.js";import*as Events from"../../events.js";import*as Entity from"../../entity.js";import*as Filter_Visibility from"./filter_visibility.js";export class Instance extends Entity.Instance{constructor({finder:e,model:t}){super({element:"div",parent:e,event_grid:e.Event_Grid()}),this.model=t,this.Live()}On_Life(){return this.Add_This_CSS("\n                .Commander {\n                    display: flex;\n                    flex-direction: row;\n                    justify-content: space-around;\n                    justify-items: center;\n                    align-content: space-around;\n                    align-items: center;\n\n                    padding: 4px;\n\n                    border-color: white;\n                    border-style: solid;\n                    border-width: 0 0 1px 0;\n\n                    font-size: 0.8em;\n\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n                    user-select: none;\n                }\n            "),this.Add_Children_CSS("\n                .Filter_Visibility {\n                    height: 100%;\n\n                    text-align: center;\n\n                    cursor: pointer;\n                }\n            "),[new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.AFTER,Events.SELECTOR_TOGGLE,this.ID()),event_handler:this.After_Selector_Toggle,event_priority:0})]}On_Refresh(){this.Has_Filter_Visibility()||(this.Abort_All_Children(),new Filter_Visibility.Instance({commander:this,model:()=>this.Model().Filter_Visibility()}))}On_Reclass(){return["Commander"]}After_Selector_Toggle(){return __awaiter(this,void 0,void 0,(function*(){this.Refresh()}))}Model(){return this.model()}Finder(){return this.Parent()}Has_Filter_Visibility(){return this.Has_Child(0)&&this.Child(0)instanceof Filter_Visibility.Instance}Filter_Visibility(){return 0,this.Child(0)}}