var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{f(r.next(e))}catch(e){i(e)}}function a(e){try{f(r.throw(e))}catch(e){i(e)}}function f(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}f((r=r.apply(e,t||[])).next())}))};import*as Utils from"../../../../utils.js";import*as Event from"../../../../event.js";import*as Events from"../../../events.js";import*as Entity from"../../../entity.js";import*as Buffer from"../../../buffer/search.js";export class Instance extends Entity.Instance{constructor({results:e,model:t}){super({element:"div",parent:e,event_grid:e.Event_Grid()}),this.model=t,this.Live()}On_Life(){return[new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.ON,Events.FINDER_BODY_TREE_LEAF_SELECT,this.Results().Body().Finder().ID()),event_handler:this.On_Finder_Body_Tree_Leaf_Select,event_priority:10})]}On_Refresh(){this.Has_Buffer()||(this.Abort_All_Children(),new Buffer.Instance({parent:this,model:()=>this.Model().Buffer(),event_grid_id:()=>this.Results().Body().Finder().ID()}))}On_Reclass(){return["List"]}On_Finder_Body_Tree_Leaf_Select(){return __awaiter(this,void 0,void 0,(function*(){this.Element().scrollTo(0,0)}))}Model(){return this.model()}Results(){return this.Parent()}Has_Buffer(){return this.Has_Child(0)&&this.Child(0)instanceof Buffer.Instance}Buffer(){return  this.Child(0)}}