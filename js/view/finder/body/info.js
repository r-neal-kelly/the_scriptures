var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function _(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,_)}a((i=i.apply(e,t||[])).next())}))};import*as Event from"../../../event.js";import*as Events from"../../events.js";import*as Entity from"../../entity.js";export class Instance extends Entity.Instance{constructor({body:e,model:t}){super({element:"div",parent:e,event_grid:e.Event_Grid()}),this.model=t,this.Live()}On_Life(){return[new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.ON,Events.FINDER_BODY_DURING_SEARCH,this.Body().Finder().ID()),event_handler:this.On_Finder_Body_During_Search,event_priority:0}),new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.ON,Events.FINDER_BODY_AFTER_SEARCH,this.Body().Finder().ID()),event_handler:this.On_Finder_Body_After_Search,event_priority:0})]}On_Refresh(){const e=this.Model();e.Is_Waiting()?this.Element().textContent=e.Waiting_Message():e.Has_Empty_Results()&&""===e.Expression().Value()?this.Element().textContent=null:this.Element().textContent=e.Results().Counts_As_String()}On_Reclass(){const e=this.Model(),t=[];return t.push("Info"),!e.Is_Waiting()&&e.Has_Empty_Results()&&""===e.Expression().Value()&&t.push("Invisible"),t}On_Finder_Body_During_Search(){return __awaiter(this,void 0,void 0,(function*(){this.Refresh()}))}On_Finder_Body_After_Search(){return __awaiter(this,void 0,void 0,(function*(){this.Refresh()}))}Model(){return this.model()}Body(){return this.Parent()}}