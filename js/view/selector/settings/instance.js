var __awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(s,o){function i(e){try{d(r.next(e))}catch(e){o(e)}}function l(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}d((r=r.apply(e,n||[])).next())}))};import*as Utils from"../../../utils.js";import*as Event from"../../../event.js";import*as Events from"../../events.js";import*as Entity from"../../entity.js";import*as Toggle from"./toggle.js";import*as Slot_Orders from"./slot_orders.js";export class Instance extends Entity.Instance{constructor({selector:e,model:n}){super({element:"div",parent:e,event_grid:e.Event_Grid()}),this.model=n,this.Live()}On_Life(){return this.Add_This_CSS("\n                .Settings {\n                    width: 100%;\n\n                    border-style: solid;\n                    border-color: white;\n                    border-width: 0 0 1px 0;\n                }\n            "),this.Add_Children_CSS("\n                .Toggle {\n                    width: 100%;\n\n                    background-color: transparent;\n                    color: white;\n\n                    text-align: center;\n\n                    cursor: pointer;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n                    user-select: none;\n                }\n\n                .Toggled_Toggle {\n                    border-style: solid;\n                    border-color: white;\n                    border-width: 0 0 1px 0;\n                }\n\n                .Slot_Orders {\n                    width: 100%;\n                }\n\n                .Slot_Order {\n                    width: 100%;\n\n                    background-color: transparent;\n                    color: white;\n\n                    text-align: center;\n\n                    cursor: pointer;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n                    user-select: none;\n                }\n\n                .Selected_Slot_Order {\n                    background-color: white;\n                    color: black;\n                }\n            "),this.Add_CSS("\n                .Invisible {\n                    display: none;\n                }\n            "),[new Event.Listener_Info({event_name:new Event.Name(Event.Prefix.AFTER,Events.SELECTOR_SETTINGS_TOGGLE,this.ID()),event_handler:this.After_Selector_Settings_Toggle,event_priority:0})]}On_Refresh(){this.Has_Toggle()&&this.Has_Slot_Orders()||(this.Abort_All_Children(),new Toggle.Instance({settings:this,model:()=>this.Model()}),new Slot_Orders.Instance({settings:this,model:()=>this.Model()}))}On_Reclass(){return["Settings"]}After_Selector_Settings_Toggle(){return __awaiter(this,void 0,void 0,(function*(){this.Refresh()}))}Model(){return this.model()}Selector(){return this.Parent()}Is_Visible(){return this.Selector().Is_Visible()}Has_Toggle(){return this.Has_Child(0)&&this.Child(0)instanceof Toggle.Instance}Toggle(){return 0,this.Child(0)}Has_Slot_Orders(){return this.Has_Child(1)&&this.Child(1)instanceof Slot_Orders.Instance}Slot_Orders(){return 0,this.Child(1)}}