var __awaiter=this&&this.__awaiter||function(e,i,t,n){return new(t||(t=Promise))((function(s,d){function r(e){try{o(n.next(e))}catch(e){d(e)}}function a(e){try{o(n.throw(e))}catch(e){d(e)}}function o(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,a)}o((n=n.apply(e,i||[])).next())}))};import*as Utils from"./utils.js";export class Instance{constructor(){this.is_ready=!1,this.is_readying=!1,this.dependencies=[]}Add_Dependencies(e){ ;for(const i of e) this.dependencies.push(i)}Is_Ready(){return this.is_ready}Before_Dependencies_Are_Ready(){return __awaiter(this,void 0,void 0,(function*(){}))}After_Dependencies_Are_Ready(){return __awaiter(this,void 0,void 0,(function*(){}))}Ready(){return __awaiter(this,void 0,void 0,(function*(){for(;this.is_readying;)yield Utils.Wait_Milliseconds(1);this.is_readying=!0,!1===this.is_ready&&(Object.getPrototypeOf(this).hasOwnProperty("Before_Dependencies_Are_Ready")&&(yield this.Before_Dependencies_Are_Ready()),this.dependencies.length>0&&(yield Promise.all(this.dependencies.map((function(e){return e.Ready()})))),Object.getPrototypeOf(this).hasOwnProperty("After_Dependencies_Are_Ready")&&(yield this.After_Dependencies_Are_Ready()),this.is_ready=!0),this.is_readying=!1}))}}